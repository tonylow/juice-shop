"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var semver = require("semver");
var utils_1 = require("../utils");
var MIN_ANGULAR_CLI_VERSION = '6.1.0';
function start() {
    return tslib_1.__awaiter(this, void 0, void 0, function () {
        var version, cli;
        return tslib_1.__generator(this, function (_a) {
            version = semver.coerce(utils_1.requireModule('@angular/cli/package').version);
            if (!version || semver.lt(version, MIN_ANGULAR_CLI_VERSION)) {
                throw new Error("Your @angular/cli version (" + version + ") is not supported. Please install " + MIN_ANGULAR_CLI_VERSION + " or higher");
            }
            cli = utils_1.requireModule('@angular/cli/lib/cli');
            if ('default' in cli) {
                cli = cli.default;
            }
            return [2 /*return*/, cli({
                    cliArgs: ['test', '--progress=false', "--karma-config=" + require.resolve('./stryker-karma.conf')],
                    inputStream: process.stdin,
                    outputStream: process.stdout
                })];
        });
    });
}
exports.start = start;
//# sourceMappingURL=angularStarter.js.map